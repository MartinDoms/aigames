import{m as o}from"./module.esm-Cm4okMZt.js";document.addEventListener("alpine:init",()=>{o.data("geographyQuiz",()=>({loading:!0,currentQuestion:null,currentQuestionNumber:1,selectedAnswer:null,answered:!1,isCorrect:!1,feedbackMessage:"",score:0,totalQuestions:0,streak:0,bestScore:0,questionType:"random",init(){this.loadStats(),this.newQuestion()},async newQuestion(){this.loading=!0,this.answered=!1,this.selectedAnswer=null,this.isCorrect=!1,this.feedbackMessage="",this.totalQuestions++;try{const e=this.questionType==="random"?"/api/geography-quiz/new-question":`/api/geography-quiz/question/${this.questionType}`,t=await fetch(e);t.ok?this.currentQuestion=await t.json():(console.error("Failed to fetch question"),this.feedbackMessage="Error loading question. Please try again.")}catch(e){console.error("Error fetching question:",e),this.feedbackMessage="Network error. Please check your connection."}finally{this.loading=!1}},async selectAnswer(e){if(this.answered)return;this.selectedAnswer=e,this.answered=!0;const t={question:this.currentQuestion.question,userAnswer:e,correctAnswer:this.currentQuestion.correctAnswer,explanation:this.currentQuestion.explanation};try{const s=await fetch("/api/geography-quiz/check-answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok){const r=await s.json();this.isCorrect=r.isCorrect,this.feedbackMessage=r.message,this.isCorrect?(this.score++,this.streak++,this.streak>this.bestScore&&(this.bestScore=this.streak)):this.streak=0,this.saveStats()}else this.feedbackMessage="Error checking answer. Please try again."}catch(s){console.error("Error checking answer:",s),this.feedbackMessage="Network error. Please try again."}},nextQuestion(){this.currentQuestionNumber++,this.newQuestion()},setQuestionType(e){this.questionType=e,this.newQuestion()},getOptionButtonClass(e){return this.answered?e===this.currentQuestion.correctAnswer?"border-green-500 bg-green-100 text-green-800":e===this.selectedAnswer&&!this.isCorrect?"border-red-500 bg-red-100 text-red-800":"border-gray-300 text-gray-500":"border-gray-300 text-gray-700 hover:border-blue-400"},loadStats(){try{const e=localStorage.getItem("geography-quiz-stats");if(e){const t=JSON.parse(e);this.score=t.score||0,this.totalQuestions=t.totalQuestions||0,this.streak=t.streak||0,this.bestScore=t.bestScore||0}}catch(e){console.error("Error loading stats:",e)}},saveStats(){try{const e={score:this.score,totalQuestions:this.totalQuestions,streak:this.streak,bestScore:this.bestScore,lastPlayed:new Date().toISOString()};localStorage.setItem("geography-quiz-stats",JSON.stringify(e))}catch(e){console.error("Error saving stats:",e)}},resetStats(){this.score=0,this.totalQuestions=0,this.streak=0,this.bestScore=0,this.saveStats()}}))});o.start();
//# sourceMappingURL=geography-quiz-nY_Xh1DO.js.map
